import{u as N,a as $,s as C,c as E,b,d as M,w as R,e as u,f as t,g as i,h as f,v as w,i as s,m as v,j as y,t as S,k as x,l as U,o as d}from"./index-65wXUo8q.js";const j={class:"card"},L={key:0,class:"error"},P={key:0,class:"error"},T=["disabled"],G={__name:"AuthView",setup(_){const r=N(),V=$(),k=U();C({mixed:{default:"Поле заполнено неправильно",required:"Поле обязательно для заполнения"},string:{email:"Поле должно быть валидным email-адресом",min:"Поле должно содержать минимум ${min} символов"}});const A=E({email:b().trim().required().email(),password:b().trim().required().min(6)}),{errors:a,defineField:p,isSubmitting:h,submitCount:c,handleSubmit:q,resetForm:B}=M({validationSchema:A}),[n,D]=p("email",{}),[m,F]=p("password",{}),g=q(async o=>{if(!r.message.type)try{await V.login(o),B(),k.push({name:"home"})}catch{}});return R(()=>c.value,o=>{o>2&&(r.message={type:"danger",title:"Ошибка",text:"Слишком много попыток входа. Попробуйте позже",closable:!1},c.value=0,r.clearMessage(5e3))}),(o,e)=>(d(),u("div",j,[e[5]||(e[5]=t("h2",{class:"title_xlarge"},"Войти в систему",-1)),e[6]||(e[6]=t("p",null,[i("Тестовый email: "),t("strong",null,"testuser@gmail.com")],-1)),e[7]||(e[7]=t("p",null,[i("Пароль: "),t("strong",null,"123456")],-1)),t("form",{onSubmit:e[2]||(e[2]=(...l)=>s(g)&&s(g)(...l))},[t("label",null,[e[3]||(e[3]=i(" Email: ")),f(t("input",v({"onUpdate:modelValue":e[0]||(e[0]=l=>y(n)?n.value=l:null)},s(D),{class:{invalid:s(a).email},placeholder:"Введите ваш email"}),null,16),[[w,s(n)]]),s(a).email?(d(),u("span",L,S(s(a).email),1)):x("",!0)]),t("label",null,[e[4]||(e[4]=i(" Пароль: ")),f(t("input",v({"onUpdate:modelValue":e[1]||(e[1]=l=>y(m)?m.value=l:null)},s(F),{class:{invalid:s(a).password},placeholder:"Введите ваш пароль"}),null,16),[[w,s(m)]]),s(a).password?(d(),u("span",P,S(s(a).password),1)):x("",!0)]),t("button",{class:"btn",type:"submit",disabled:s(h)||!!s(r).message.type},"Войти",8,T)],32)]))}};export{G as default};
